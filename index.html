<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEXTER | FREE TIER</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-red: #ff0055;
            --neon-yellow: #ffee00;
            --neon-green: #39ff14;
            --bg-dark: #050505;
            --panel-bg: rgba(10, 10, 16, 0.95);
            --font-main: 'Rajdhani', sans-serif;
            --font-tech: 'Share Tech Mono', monospace;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: var(--bg-dark); color: white; font-family: var(--font-main);
            height: 100vh; overflow: hidden; display: flex; flex-direction: column;
        }
        #particles-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; pointer-events: none;
        }
        .scanline {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.4) 51%);
            background-size: 100% 4px; pointer-events: none; z-index: 100; opacity: 0.5;
        }
        .cyber-grid {
            position: absolute; width: 200%; height: 200%;
            background-image: linear-gradient(rgba(0, 243, 255, 0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 243, 255, 0.08) 1px, transparent 1px);
            background-size: 40px 40px; transform: perspective(500px) rotateX(60deg) translateY(-100px) translateZ(-200px);
            animation: gridMove 20s linear infinite; z-index: 0;
        }
        @keyframes gridMove { 
            0% { transform: perspective(500px) rotateX(60deg) translateY(0) translateZ(-200px); } 
            100% { transform: perspective(500px) rotateX(60deg) translateY(40px) translateZ(-200px); } 
        }
        /* Include all the rest of the original styling CSS, maintenance gate, terms gate, expiry gate, all HTML structure with sidebar (timer, CCTV, stats), chat section */
        /* Example add-ons (elaborating on structure and adding functions etc...) */
        .sidebar { /* Sidebar styles */ }
        .chat-section { /* Chat section styles */ }
        /* Include all elements, gates and functions */
    </style>
</head>
<body>
    <canvas id="particles-canvas"></canvas>
    <div class="scanline"></div>
    <div class="cyber-grid"></div>
    <div class="sidebar">
        <!-- Sidebar content (timer, CCTV, stats) -->
    </div>
    <div class="chat-section">
        <!-- Chat interface here -->
        <input id="input" type="text" placeholder="Type your message..." />
        <button id="btn">Send</button>
        <button id="voiceBtn">Voice</button>
    </div>
    <script>
        // Complete JavaScript code including particle animation, system stats, gates, timer, voice recognition, commands
        async function handleSend() {
            const val = input.value.trim();
            if(!val) return;
            if (val.startsWith('/')) {
                addMsg(val, 'user');
                input.value = '';
                if (handleCommand(val)) return;
                else { addMsg('âŒ Unknown command. Type /help for available commands.', 'ai'); return; }
            }
            addMsg(val, 'user');
            input.value = '';
            input.disabled = true;
            btn.disabled = true;
            voiceBtn.disabled = true;
            const lowerVal = val.toLowerCase();
            if (lowerVal.includes("who made you") || lowerVal.includes("who created you") || lowerVal.includes("who is your creator") || lowerVal.includes("who developed you") || lowerVal.includes("who built you")) {
                showTypingIndicator();
                setTimeout(() => {
                    removeTypingIndicator();
                    addMsg("I was developed by Sarnab. ðŸ‘¨â€ðŸ’»", 'ai');
                    input.disabled = false; btn.disabled = false; voiceBtn.disabled = false; input.focus();
                }, 1000);
                return;
            }
            showTypingIndicator();
            let success = false;
            
            // Try Method 1: Hugging Face Inference API (Free forever)
            try {
                const hfResponse = await fetch("https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.2", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ inputs: "You are Dexter, a helpful AI assistant developed by Sarnab. Keep answers concise and helpful. User asks: " + val })
                });
                if (hfResponse.ok) {
                    const hfData = await hfResponse.json();
                    if (hfData && hfData[0] && hfData[0].generated_text) {
                        removeTypingIndicator();
                        addMsg(hfData[0].generated_text.split("User asks:")[1] || hfData[0].generated_text, 'ai');
                        success = true;
                    }
                }
            } catch(e) { console.log('HF API failed, trying next...'); }
            
            // Try Method 2: Pollinations AI (text endpoint)
            if (!success) {
                try {
                    const pollResponse = await fetch("https://text.pollinations.ai/" + encodeURIComponent(val));
                    if (pollResponse.ok) {
                        const text = await pollResponse.text();
                        if (text && text.trim()) {
                            removeTypingIndicator();
                            addMsg(text.trim(), 'ai');
                            success = true;
                        }
                    }
                } catch(e) { console.log('Pollinations failed, using fallback...'); }
            }
            
            // Fallback: Smart local responses
            if (!success) {
                removeTypingIndicator();
                const keywords = val.toLowerCase();
                let fallbackMsg = "";
                if (keywords.includes("hello") || keywords.includes("hi") || keywords.includes("hey")) {
                    fallbackMsg = "ðŸ‘‹ Hello! I'm Dexter, developed by Sarnab. How can I assist you today?";
                } else if (keywords.includes("how are you")) {
                    fallbackMsg = "ðŸ¤– I'm functioning optimally! All systems green. How can I help you?";
                } else if (keywords.includes("thank")) {
                    fallbackMsg = "You're welcome! Happy to help! ðŸ˜Š";
                } else if (keywords.includes("joke")) {
                    fallbackMsg = "ðŸ˜„ Why don't programmers like nature? Too many bugs! ðŸ›";
                } else if (keywords.includes("help") && !val.startsWith('/')) {
                    fallbackMsg = "ðŸ’¡ I can help with questions, writing, coding, and more! Try asking me anything or type /help for commands.";
                } else {
                    fallbackMsg = "I understand you're asking about: '" + val +"'. I'm currently using offline mode. For best results, the AI services should reconnect soon. Meanwhile, try /help for available commands! ðŸ”§";
                }
                addMsg(fallbackMsg, 'ai');
            }
            
            if (timeRemaining > 0) {
                input.disabled = false; btn.disabled = false; voiceBtn.disabled = false; input.focus();
            }
        }
    </script>
</body>
</html>
